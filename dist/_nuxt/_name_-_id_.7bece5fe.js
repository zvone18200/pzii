import{u as C}from"./composables.69376fc2.js";import{a as z,b as m,p,e as N,r as y,f as B,h as j,i as A,o as f,j as g,k as h,u as r,l as i,t as v,F as D,m as I,q as k,w as S,v as w,s as $,x as M,y as V}from"./entry.5d8d0cd0.js";import{u as q}from"./fetch.91d3daae.js";import{u as O}from"./useUtilities.50e64ac7.js";const U=()=>z().$img,E={src:{type:String,required:!0},format:{type:String,default:void 0},quality:{type:[Number,String],default:void 0},background:{type:String,default:void 0},fit:{type:String,default:void 0},modifiers:{type:Object,default:void 0},preset:{type:String,default:void 0},provider:{type:String,default:void 0},sizes:{type:[Object,String],default:void 0},preload:{type:Boolean,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},alt:{type:String,default:void 0},referrerpolicy:{type:String,default:void 0},usemap:{type:String,default:void 0},longdesc:{type:String,default:void 0},ismap:{type:Boolean,default:void 0},loading:{type:String,default:void 0},crossorigin:{type:[Boolean,String],default:void 0,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,default:void 0,validator:e=>["async","auto","sync"].includes(e)}},F=e=>{const o=m(()=>({provider:e.provider,preset:e.preset})),t=m(()=>({width:p(e.width),height:p(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding})),s=m(()=>({...e.modifiers,width:p(e.width),height:p(e.height),format:e.format,quality:e.quality,background:e.background,fit:e.fit}));return{options:o,attrs:t,modifiers:s}},P={...E,placeholder:{type:[Boolean,String,Number,Array],default:void 0}},R=N({name:"NuxtImg",props:P,setup:(e,o)=>{const t=U(),s=F(e),l=y(!1),c=m(()=>t.getSizes(e.src,{...s.options.value,sizes:e.sizes,modifiers:{...s.modifiers.value,width:p(e.width),height:p(e.height)}})),b=m(()=>{const a=s.attrs.value;return e.sizes&&(a.sizes=c.value.sizes,a.srcset=c.value.srcset),a}),d=m(()=>{let a=e.placeholder;if(a===""&&(a=!0),!a||l.value)return!1;if(typeof a=="string")return a;const _=Array.isArray(a)?a:typeof a=="number"?[a,a]:[10,10];return t(e.src,{...s.modifiers.value,width:_[0],height:_[1],quality:_[2]||50},s.options.value)}),n=m(()=>e.sizes?c.value.src:t(e.src,s.modifiers.value,s.options.value)),u=m(()=>d.value?d.value:n.value);if(e.preload){const a=Object.values(c.value).every(_=>_);C({link:[{rel:"preload",as:"image",...a?{href:c.value.src,imagesizes:c.value.sizes,imagesrcset:c.value.srcset}:{href:u.value}}]})}const x=y(null);return B(()=>{if(d.value){const a=new Image;a.src=n.value,a.onload=()=>{x.value.src=n.value,l.value=!0}}}),()=>j("img",{ref:x,key:u.value,src:u.value,...b.value,...o.attrs})}}),H={class:"mt-10"},L={class:"mt-10 text-4xl"},T={class:"text-slate-500 flex text-lg mt-3 border-b pb-5 justify-between"},Z={class:"flex"},G={class:"mr-2"},J=i("p",{class:"mr-2"},"|",-1),K={class:"mr-2"},Q={class:"font-bold text-2xl"},W={__name:"Hero",props:{car:Object},setup(e){const o=A();return(t,s)=>{const l=R;return f(),g("div",H,[h(l,{src:`${r(o).public.supabase.url}/storage/v1/object/public/images/${e.car.image}`,class:"w-full",alt:""},null,8,["src"]),i("h1",L,v(e.car.name),1),i("div",T,[i("div",Z,[i("p",G,v(e.car.numberOfSeats)+" seats",1),J,i("p",K,v(e.car.miles)+" miles",1)]),i("div",null,[i("p",Q,"$"+v(e.car.price),1)])])])}}},X={class:"mr-10 mt-5 border-b pb-5"},Y=i("p",{class:"rounded text-lime-800 mr-3"},"\u2714",-1),ee={__name:"Attributes",props:{features:Array},setup(e){return(o,t)=>(f(),g("div",X,[(f(!0),g(D,null,I(e.features,s=>(f(),g("div",{class:"flex text-lg mt-2",key:s},[Y,i("p",null,v(s),1)]))),128))]))}},te={class:"mt-5"},se={class:"mb-10"},ae={__name:"Description",props:{description:String},setup(e){return(o,t)=>(f(),g("div",te,[i("p",se,v(e.description),1)]))}},ie={class:"mt-10"},re={class:"flex w-[600px] justify-between"},oe={class:"flex mt-4 w-[600px]"},ne=["disabled"],le={key:0,class:"mt-3 text-red-400"},ue={key:1,class:"mt-3 text-green-400"},ce={__name:"Contact",setup(e){const o=k(),t=y({name:"",email:"",phone:"",message:""}),s=y(""),l=y(""),c=m(()=>{for(let d in t.value)if(!t.value[d])return!0;return!1}),b=async()=>{try{const d=await $fetch(` /api/car/listings/${o.params.id}/message`,{method:"post",body:t.value});t.value={name:"",email:"",phone:"",message:""},l.value="Poruka je poslana!!",s.value=""}catch(d){s.value=d.statusmessage,l.value=""}};return(d,n)=>(f(),g("div",ie,[i("div",re,[S(i("input",{"onUpdate:modelValue":n[0]||(n[0]=u=>r(t).name=u),type:"text",class:"border p-1",placeholder:"Name"},null,512),[[w,r(t).name]]),S(i("input",{"onUpdate:modelValue":n[1]||(n[1]=u=>r(t).email=u),type:"text",class:"border p-1",placeholder:"Email"},null,512),[[w,r(t).email]]),S(i("input",{"onUpdate:modelValue":n[2]||(n[2]=u=>r(t).phone=u),type:"text",class:"border p-1",placeholder:"Phone"},null,512),[[w,r(t).phone]])]),i("div",oe,[S(i("textarea",{"onUpdate:modelValue":n[3]||(n[3]=u=>r(t).message=u),class:"border p-1 w-full",placeholder:"Message"},null,512),[[w,r(t).message]])]),i("button",{class:"bg-blue-400 text-white px-10 py-3 rounded mt-4",onClick:b,disabled:r(c)}," Submit ",8,ne),r(s)?(f(),g("p",le,v(r(s)),1)):$("",!0),r(l)?(f(),g("p",ue,v(r(l)),1)):$("",!0)]))}},de=async e=>{const{data:o,error:t}=await q(`/api/car/${e}`,"$Z2BfINhu1R");if(t.value)throw M({statusCode:t.value.statusCode,statusMessage:t.value.statusMessage});return{data:o}},pe={__name:"[name]-[id]",async setup(e){let o,t;const s=k(),{data:l}=([o,t]=V(()=>de(s.params.id)),o=await o,t(),o),{toTitleCase:c}=O();return C({title:c(s.params.name)}),(b,d)=>{const n=W,u=ee,x=ae,a=ce;return f(),g("div",null,[h(n,{car:r(l)},null,8,["car"]),h(u,{features:r(l).features},null,8,["features"]),h(x,{description:r(l).description},null,8,["description"]),h(a)])}}};export{pe as default};
